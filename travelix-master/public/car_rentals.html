<!DOCTYPE html>
<html lang="en">

<head>
    <title>Offers</title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="description" content="MiniTravels Project" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" type="text/css" href="styles/bootstrap4/bootstrap.min.css" />
    <link href="plugins/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" type="text/css" href="styles/offers_styles.css" />
    <link rel="stylesheet" type="text/css" href="styles/offers_responsive.css" />

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

</head>

<body onload="readall();modify();">
    <!-- Modal -->
    <div class="modal fade" id="signup_modal" style="width: 20vw; margin: auto;" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Sign up</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body">
                    <form autocomplete="off" onsubmit="signup(event)">
                        Email address<br>
                        <input type="email" id="signupEmail" /><br><br>Password<br>
                        <input type="password" id="signupPassword" />
                        <br>
                        <hr>
                        <button class="btn btn-warning" type="submit">submit</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal -->
    <div class="modal fade" id="login_modal" style="width: 20vw; margin: auto;" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Log in</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body">
                    <form autocomplete="off" onsubmit="login(event)">
                        Email address<br>
                        <input type="email" id="loginEmail" /><br><br>Password<br>
                        <input type="password" id="loginPassword" />
                        <br>
                        <hr>
                        <button class="btn btn-warning" style="left: -20vw; " type="submit">submit</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="super_container">
        <!-- Header -->

        <header class="header">
            <!-- Top Bar -->

            <div class="top_bar">
                <div class="container">
                    <div class="row">
                        <div class="col d-flex flex-row">
                            <div class="phone">+91 22 4233 4000</div>
                            <div class="social">
                                <ul class="social_list">
                                    <li class="social_list_item">
                                        <a href="#"><i class="fa fa-pinterest" aria-hidden="true"></i></a>
                                    </li>
                                    <li class="social_list_item">
                                        <a href="#"><i class="fa fa-facebook" aria-hidden="true"></i></a>
                                    </li>
                                    <li class="social_list_item">
                                        <a href="#"><i class="fa fa-twitter" aria-hidden="true"></i></a>
                                    </li>
                                    <li class="social_list_item">
                                        <a href="#"><i class="fa fa-dribbble" aria-hidden="true"></i></a>
                                    </li>
                                    <li class="social_list_item">
                                        <a href="#"><i class="fa fa-behance" aria-hidden="true"></i></a>
                                    </li>
                                    <li class="social_list_item">
                                        <a href="#"><i class="fa fa-linkedin" aria-hidden="true"></i></a>
                                    </li>
                                </ul>
                            </div>
                            <div class="user_box ml-auto">
                                <div class="user_box_login user_box_link">
                                    <a href="cart.html">My Cart</a>
                                </div>
                                <div class="user_box_login user_box_link">
                                    <a href="#" id="login_m" data-toggle="modal" data-target="#login_modal">login</a>
                                    <a href="#" id="loggedin"></a>
                                </div>
                                <div class="user_box_register user_box_link">
                                    <a href="#" id="signup_m" data-toggle="modal"
                                        data-target="#signup_modal">register</a>
                                    <a href="#" id="log out" onclick="logout()"></a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Main Navigation -->

            <nav class="main_nav">
                <div class="container">
                    <div class="row">
                        <div class="
                  col
                  main_nav_col
                  d-flex
                  flex-row
                  align-items-center
                  justify-content-start
                ">
                            <div class="logo_container">
                                <div class="logo">
                                    <a href="#"><img src="images/logo.png" alt="" />MiniTravels</a>
                                </div>
                            </div>
                            <div class="main_nav_container ml-auto">
                                <ul class="main_nav_list">
                                    <li class="main_nav_item"><a href="home.html">home</a></li>
                                    <li class="main_nav_item">
                                        <a href="about.html">about us</a>
                                    </li>
                                    <li class="main_nav_item"><a href="#">offers</a></li>
                                    <li class="main_nav_item"><a href="blog.html">news</a></li>
                                    <li class="main_nav_item">
                                        <a href="contact.html">contact</a>
                                    </li>
                                </ul>
                            </div>
                            <div class="content_search ml-lg-0 ml-auto">
                                <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg"
                                    xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="17px"
                                    height="17px" viewBox="0 0 512 512" enable-background="new 0 0 512 512"
                                    xml:space="preserve">
                                    <g>
                                        <g>
                                            <g>
                                                <path class="mag_glass" fill="#FFFFFF"
                                                    d="M78.438,216.78c0,57.906,22.55,112.343,63.493,153.287c40.945,40.944,95.383,63.494,153.287,63.494
                                            s112.344-22.55,153.287-63.494C489.451,329.123,512,274.686,512,216.78c0-57.904-22.549-112.342-63.494-153.286
                                            C407.563,22.549,353.124,0,295.219,0c-57.904,0-112.342,22.549-153.287,63.494C100.988,104.438,78.439,158.876,78.438,216.78z
                                            M119.804,216.78c0-96.725,78.69-175.416,175.415-175.416s175.418,78.691,175.418,175.416
                                            c0,96.725-78.691,175.416-175.416,175.416C198.495,392.195,119.804,313.505,119.804,216.78z" />
                                            </g>
                                        </g>
                                        <g>
                                            <g>
                                                <path class="mag_glass" fill="#FFFFFF" d="M6.057,505.942c4.038,4.039,9.332,6.058,14.625,6.058s10.587-2.019,14.625-6.058L171.268,369.98
                                            c8.076-8.076,8.076-21.172,0-29.248c-8.076-8.078-21.172-8.078-29.249,0L6.057,476.693
                                            C-2.019,484.77-2.019,497.865,6.057,505.942z" />
                                            </g>
                                        </g>
                                    </g>
                                </svg>
                            </div>

                            <form id="search_form" class="search_form bez_1">
                                <input type="search" class="search_content_input bez_1" />
                            </form>

                            <div class="hamburger">
                                <i class="fa fa-bars trans_200"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </nav>
        </header>

        <div class="menu trans_500">
            <div class="
            menu_content
            d-flex
            flex-column
            align-items-center
            justify-content-center
            text-center
          ">
                <div class="menu_close_container">
                    <div class="menu_close"></div>
                </div>
                <div class="logo menu_logo">
                    <a href="#"><img src="images/logo.png" alt="" /></a>
                </div>
                <ul>
                    <li class="menu_item"><a href="index.html">home</a></li>
                    <li class="menu_item"><a href="about.html">about us</a></li>
                    <li class="menu_item"><a href="#">offers</a></li>
                    <li class="menu_item"><a href="blog.html">news</a></li>
                    <li class="menu_item"><a href="contact.html">contact</a></li>
                </ul>
            </div>
        </div>

        <!-- Home -->

        <div class="home">
            <div class="home_background parallax-window" data-parallax="scroll"
                data-image-src="images/about_background.jpg"></div>
            <div class="home_content">
                <div class="home_title">our offers</div>
            </div>
        </div>

        <!-- Offers -->

        <div class="offers">
            <!-- Search -->

            <div class="search">
                <div class="search_inner">
                    <!-- Search Contents -->

                    <div class="container fill_height no-padding">
                        <div class="row fill_height no-margin">
                            <div class="col fill_height no-padding">
                                <!-- Search Tabs -->

                                <div class="search_tabs_container">
                                    <div class="
                        search_tabs
                        d-flex
                        flex-lg-row flex-column
                        align-items-lg-center align-items-start
                        justify-content-lg-between justify-content-start
                      ">
                                        <div onclick="window.location.href='hotels.html'" class="
                          search_tab
                          active
                          d-flex
                          flex-row
                          align-items-center
                          justify-content-lg-center justify-content-start
                        ">
                                            <img src="images/suitcase.png" alt="" /><span>hotels</span>
                                        </div>
                                        <div class="
                          search_tab
                          d-flex
                          flex-row
                          align-items-center
                          justify-content-lg-center justify-content-start
                        ">
                                            <img src="images/bus.png" alt="" />car rentals
                                        </div>
                                        <div onclick="window.location.href='trips.html'" class="
                          search_tab
                          d-flex
                          flex-row
                          align-items-center
                          justify-content-lg-center justify-content-start
                        ">
                                            <img src="images/island.png" alt="" />trips
                                        </div>
                                    </div>
                                </div>
                                <!-- Search Panel -->
                                <div class="search_panel">
                                    <form id="search_form_1" class="
                        search_panel_content
                        d-flex
                        flex-lg-row flex-column
                        align-items-lg-center align-items-start
                        justify-content-lg-between justify-content-start
                      " style=" width: 120vw;">
                                        <div class="search_item" style="width: 17vw;">
                                            <div>destination</div>
                                            <input type="text" id="trip_destination" class="destination search_input" />
                                        </div>
                                        <div class="search_item">
                                            <div>check in</div>
                                            <input type="date" id="trip_checkin" required="required"
                                                class="check_in search_input" placeholder="YYYY-MM-DD" />
                                        </div>
                                        <div class="search_item">
                                            <div>check out</div>
                                            <input type="date" id="trip_checkout" required="required"
                                                class="check_out search_input" placeholder="YYYY-MM-DD" />
                                        </div>
                                        <div class="search_item">
                                            <div>adults</div>
                                            <select name="adults" id="adults" class="dropdown_item_select search_input">
                                                <option>01</option>
                                                <option>02</option>
                                                <option>03</option>
                                            </select>
                                        </div>
                                        <div class="search_item">
                                            <div>children</div>
                                            <select name="children" id="children"
                                                class="dropdown_item_select search_input">
                                                <option>0</option>
                                                <option>02</option>
                                                <option>03</option>
                                            </select>
                                        </div>
                                        <div style="top: -1vw;">
                                            <button onlick="search()" class="button search_button">
                                                search<span></span><span></span><span></span>
                                            </button>
                                        </div>
                                    </form>
                                </div>


                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Offers -->

            <div class="container">
                <div class="row">
                    <div class="col-lg-1 temp_col"></div>
                    <div class="col-lg-11">
                        <!-- Offers Sorting -->
                        <div class="offers_sorting_container">
                            <ul class="offers_sorting">
                                <li>
                                    <span class="sorting_text">price</span>
                                    <i class="fa fa-chevron-down"></i>
                                    <ul>
                                        <li class="sort_btn" onclick="readall()" id="all_price">
                                            <span>show all</span>
                                        </li>
                                        <li class="sort_btn" onclick="asc_sort_price()" id="price_ascending">
                                            <span>ascending</span>
                                        </li>
                                        <li class="sort_btn" onclick="range2_4_price()" id="2k_4k">
                                            <span>2000 - 4000</span>
                                        </li>
                                        <li class="sort_btn" onclick="price44()" i="4k+">
                                            <span>> 4000</span>
                                        </li>
                                    </ul>
                                </li>
                                <li>
                                    <span class="sorting_text">bags</span>
                                    <i class="fa fa-chevron-down"></i>
                                    <ul>
                                        <li class="sort_btn" onclick="readall()" id="all_bags">
                                            <span>show all</span>
                                        </li>
                                        <li class="sort_btn" onclick="asc_sort_bags()" id="price_ascending">
                                            <span>ascending</span>
                                        </li>
                                        <li class="sort_btn" onclick="range1_2_bags()" id="1_2">
                                            <span>1 to 2</span>
                                        </li>
                                        <li class="sort_btn" onclick="range3_4_bags()" id="3_4">
                                            <span>3 to 4</span>
                                        </li>
                                    </ul>
                                </li>
                                <li>
                                    <span class="sorting_text">passengers</span>
                                    <i class="fa fa-chevron-down"></i>
                                    <ul>
                                        <li class="sort_btn" onclick="readall()" id="all_bags">
                                            <span>show all</span>
                                        </li>
                                        <li class="sort_btn" onclick="asc_sort_seats()" id="price_ascending">
                                            <span>ascending</span>
                                        </li>
                                        <li class="sort_btn" onclick="range3_5_seats()" id="3_5">
                                            <span>3 to 5</span>
                                        </li>
                                        <li class="sort_btn" onclick="seats66()" id="6+">
                                            <span>6 or more</span>
                                        </li>

                                    </ul>
                                </li>
                                <li>
                                    <span class="sorting_text">car type</span>
                                    <i class="fa fa-chevron-down"></i>
                                    <ul>
                                        <li class="sort_btn" onclick="readall()" id="all_car_types">
                                            <span>show all</span>
                                        </li>
                                        <li class="sort_btn" onclick="asc_sort_type()" id="price_ascending">
                                            <span>ascending</span>
                                        </li>
                                        <li class="sort_btn" onclick="s_l()" id="S_L">
                                            <span>small-large</span>
                                        </li>
                                        <li class="sort_btn" onclick="suv()" id="SUV">
                                            <span>SUV</span>
                                        </li>
                                        <li class="sort_btn" onclick="van_type()" id="van">
                                            <span>van</span>
                                        </li>

                                    </ul>
                                </li>

                            </ul>
                        </div>
                    </div>

                    <div id="col-lg-12" class="col-lg-12" style="height: auto;">
                        <!-- Offers Grid -->
                        <div id="not_found" style="display: none;">
                            <br><br><br>
                            <h1>NOT FOUND</h1>
                        </div>
                        <div id="results"></div>
                    </div>
                    <!--End of offers item  -->

                </div>
            </div>
        </div>
    </div>
    </div>
    </div>
    <br><br><br><br><br><br><br><br><br><br><br><br>
    <!-- Footer -->

    <footer class="footer" style="height: 35vw; font-size: larger;">
        <div class="container">
            <div class="row">
                <!-- Footer Column -->
                <div class="col-lg-3 footer_column">
                    <div class="footer_col">
                        <div class="footer_content footer_about">
                            <div class="logo_container footer_logo">
                                <div class="logo">
                                    <a href="#"><img src="images/logo.png" alt="" />MiniTravels</a>
                                </div>
                            </div>
                            <p class="footer_about_text" style="width: 20vw;">
                                We offer the best limits on our top-rated visit bundles to clients who pick our viable
                                administrations over and over.
                                How about we remind you indeed that we donâ€™t expect to be your visit and travel
                                specialists; we endeavor to be your
                                vacation accomplices until the end of time.
                            </p>
                            <ul class="footer_social_list">
                                <li class="footer_social_item">
                                    <a href="#"><i class="fa fa-pinterest"></i></a>
                                </li>
                                <li class="footer_social_item">
                                    <a href="#"><i class="fa fa-facebook-f"></i></a>
                                </li>
                                <li class="footer_social_item">
                                    <a href="#"><i class="fa fa-twitter"></i></a>
                                </li>
                                <li class="footer_social_item">
                                    <a href="#"><i class="fa fa-dribbble"></i></a>
                                </li>
                                <li class="footer_social_item">
                                    <a href="#"><i class="fa fa-behance"></i></a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Footer Column -->
                <div class="col-lg-3 footer_column" style="left: 10vw;width: 20vw;">
                    <div class="footer_col">
                        <div class="footer_title">blog posts</div>
                        <div class="footer_content footer_blog">
                            <!-- Footer blog item -->
                            <div class="footer_blog_item clearfix">
                                <div class="footer_blog_image">
                                    <img style="width: 90px;height: 90px;" src="images/kerala_trip3.jpg"
                                        alt="https://unsplash.com/@avidenov" />
                                </div>
                                <div class="footer_blog_content" style="width: 30vw;">
                                    <div class="footer_blog_title">
                                        <a href="blog.html"
                                            style="font-size: medium;padding-left: 2vw; display: inline-flex;">Travel
                                            with us this year</a>
                                    </div>
                                    <div class="footer_blog_date"
                                        style="font-size: medium;padding-left: 2vw; display: inline-flex;">Oct 23, 2021
                                    </div>
                                </div>
                            </div>
                            <br>
                            <!-- Footer blog item -->
                            <div class="footer_blog_item clearfix">
                                <div class="footer_blog_image">
                                    <img style="width: 90px;height: 90px;" src="images/delhi_trip2.jpg"
                                        alt="https://unsplash.com/@deannaritchie" />
                                </div>
                                <div class="footer_blog_content" style="width: 30vw;">
                                    <div class="footer_blog_title">
                                        <a href="blog.html"
                                            style="font-size: medium;padding-left: 2vw; display: inline-flex;">New
                                            destinations for you</a>
                                    </div>
                                    <div class="footer_blog_date"
                                        style="font-size: medium;padding-left: 2vw; display: inline-flex;">Oct 21, 2021
                                    </div>
                                </div>
                            </div>
                            <br>
                            <!-- Footer blog item -->
                            <div class="footer_blog_item clearfix">
                                <div class="footer_blog_image">
                                    <img style="width: 90px;height: 90px;" src="images/dubai_trip.jpg"
                                        alt="https://unsplash.com/@bergeryap87" />
                                </div>
                                <div class="footer_blog_content" style="width: 30vw;">
                                    <div class="footer_blog_title">
                                        <a href="blog.html"
                                            style="font-size:medium;padding-left: 2vw; display: inline-flex;">Travel
                                            with us this year</a>
                                    </div>
                                    <div class="footer_blog_date"
                                        style="font-size: medium;padding-left: 2vw; display: inline-flex;">Oct 27, 2021
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>



                <!-- Footer Column -->
                <div class="col-lg-3 footer_column" style="left: 20vw;">
                    <div class="footer_col">
                        <div class="footer_title">contact info</div>
                        <div class="footer_content footer_contact">
                            <ul class="contact_info_list">
                                <li class="contact_info_item d-flex flex-row">
                                    <div>
                                        <div class="contact_info_icon">
                                            <img src="images/placeholder.svg" alt="" />
                                        </div>
                                    </div>
                                    <div class="contact_info_text">
                                        Vile Parle West, Mumbai, Maharashtra 400056, India
                                    </div>
                                </li>
                                <li class="contact_info_item d-flex flex-row">
                                    <div>
                                        <div class="contact_info_icon">
                                            <img src="images/phone-call.svg" alt="" />
                                        </div>
                                    </div>
                                    <div class="contact_info_text">+91 22 4233 4000</div>
                                </li>
                                <li class="contact_info_item d-flex flex-row">
                                    <div>
                                        <div class="contact_info_icon">
                                            <img src="images/message.svg" alt="" />
                                        </div>
                                    </div>
                                    <div class="contact_info_text">
                                        <a href="mailto:contactme@gmail.com?Subject=Hello"
                                            target="_top">mini_travels@gmail.com</a>
                                    </div>
                                </li>

                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>



    <div class="copyright">
        <div class="container">
            <div class="row">
                <div class="col-lg-3 order-lg-1 order-2">
                    <div class="copyright_content d-flex flex-row align-items-center">

                    </div>
                </div>
                <div class="col-lg-9 order-lg-2 order-1">
                    <div class="
                  footer_nav_container
                  d-flex
                  flex-row
                  align-items-center
                  justify-content-lg-end
                ">
                        <div class="footer_nav">

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
    <script src="js/jquery-3.2.1.min.js"></script>
    <script src="styles/bootstrap4/popper.js"></script>
    <script src="styles/bootstrap4/bootstrap.min.js"></script>
    <script src="plugins/Isotope/isotope.pkgd.min.js"></script>
    <script src="plugins/easing/easing.js"></script>
    <script src="plugins/parallax-js-master/parallax.min.js"></script>
    <script src="js/car_rentals.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/9.0.2/firebase.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/9.0.2/firebase-analytics.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/9.0.2/firebase-auth.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/9.0.2/firebase-database.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/9.0.2/firebase-firestore.js"></script>
    <!-- update the version number as needed -->
    <script src="/__/firebase/7.21.0/firebase.js"></script>
    <!-- include only the Firebase features as you need -->
    <script src="/__/firebase/7.21.0/firebase-auth.js"></script>
    <!-- 
  initialize the SDK after all desired features are loaded, set useEmulator to false
  to avoid connecting the SDK to running emulators.
-->
    <script defer src="/__/firebase/init.js?useEmulator=true"></script>

    <script>
        var global_counter = 0;
        var sum = 0;

        function del_ele() {
            var d = document.getElementById("results");
            d.innerHTML = ""
        }

        var sum = 0;

        function search() {
            console.log("searching for data");
            var trip_dest = document.getElementById("trip_destination").value;
            var trip_in = document.getElementById("trip_checkin").value;
            var trip_out = document.getElementById("trip_checkout").value;
            var adult = document.getElementById("adults").value;
            var child = document.getElementById("children").value;
            sum = parseInt(child) + parseInt(adult);
            console.log(
                sum
            );

            search_res(sum);

        }

        function search_res(sum) {
            if (global_counter == 1) {
                del_ele();
                global_counter = 0;
            }

            var db = firebase.firestore();
            db.collection("Car rentals").where("Adults", ">=", sum).get().then((snapshot) => {
                getinfo(snapshot.docs, snapshot.size);
            });
            global_counter = 1;
        }

        function readall() {
            if (global_counter == 1) {
                del_ele();
                global_counter = 0;
            }
            var db = firebase.firestore();
            db.collection('Car rentals').get().then((snapshot) => {
                getinfo(snapshot.docs, snapshot.size);
            });
            global_counter = 1;
        }

        function asc_sort_price() {

            if (global_counter == 1) {
                del_ele();
                global_counter = 0;
            }

            if (sum > 1) {
                console.log(sum)
                var db = firebase.firestore();
                db.collection("Car rentals").where("Adults", ">=", sum).orderBy("Adults").orderBy("Cost", "asc").get().then((snapshot) => {
                    getinfo(snapshot.docs, snapshot.size);
                });
            } else {
                console.log(sum)
                var db = firebase.firestore();
                db.collection("Car rentals").orderBy("Cost", "asc").get().then((snapshot) => {
                    getinfo(snapshot.docs, snapshot.size);
                });
            }
            global_counter = 1;
        }

        function asc_sort_bags() {
            if (global_counter == 1) {
                del_ele();
                global_counter = 0;
            }
            if (sum > 1) {
                var db = firebase.firestore();
                db.collection("Car rentals").where("Adults", ">=", sum).orderBy("Adults").orderBy("Bags", "asc").get().then((snapshot) => {
                    getinfo(snapshot.docs, snapshot.size);
                });
            } else {
                console.log(sum)
                var db = firebase.firestore();
                db.collection("Car rentals").orderBy("Bags").get().then((snapshot) => {
                    getinfo(snapshot.docs, snapshot.size);
                });
            }
            global_counter = 1;
        }

        function asc_sort_seats() {
            if (global_counter == 1) {
                del_ele();
                global_counter = 0;
            }
            if (sum > 1) {
                var db = firebase.firestore();
                db.collection("Car rentals").where("Adults", ">=", sum).orderBy("Adults").get().then((snapshot) => {
                    getinfo(snapshot.docs, snapshot.size);
                });
            } else {
                console.log(sum)
                var db = firebase.firestore();
                db.collection("Car rentals").orderBy("Adults").get().then((snapshot) => {
                    getinfo(snapshot.docs, snapshot.size);
                });
            }
            global_counter = 1;
        }

        function asc_sort_type() {
            if (global_counter == 1) {
                del_ele();
                global_counter = 0;
            }
            if (sum > 1) {
                var db = firebase.firestore();
                db.collection("Car rentals").where("Adults", ">=", sum).orderBy("Adults").orderBy("Order").get().then((snapshot) => {
                    getinfo(snapshot.docs, snapshot.size);
                });
            } else {
                console.log(sum)
                var db = firebase.firestore();
                db.collection("Car rentals").orderBy("Order", "asc").get().then((snapshot) => {
                    getinfo(snapshot.docs, snapshot.size);
                });
            }
            global_counter = 1;
        }
        var array2 = [];

        function range2_4_price() {
            if (global_counter == 1) {
                del_ele();
                global_counter = 0;
            }
            var db = firebase.firestore();
            db.collection("Car rentals").where("Cost", ">=", 2000).where("Cost", "<=", 4000).orderBy("Cost").get().then((snapshot) => {
                return Promise.all(snapshot.docs.map(grp => {
                    if (grp.data().Adults >= sum) {
                        array2.push(grp.data());
                    }
                }))
            });
            // console.log(array2)
            getinfo1(array2);
            global_counter = 1;
            array2.length = 0

        }

        function price44() {
            if (global_counter == 1) {
                del_ele();
                global_counter = 0;
            }
            var db = firebase.firestore();
            db.collection("Car rentals").where("Cost", ">=", 4000).orderBy("Cost").get().then((snapshot) => {
                return Promise.all(snapshot.docs.map(grp => {
                    if (grp.data().Adults >= sum) {
                        array2.push(grp.data());
                    }
                }))
            });
            // console.log(array2)
            getinfo1(array2);
            global_counter = 1;
            array2.length = 0

        }

        function range1_2_bags() {
            if (global_counter == 1) {
                del_ele();
                global_counter = 0;
            }
            var db = firebase.firestore();
            db.collection("Car rentals").where("Bags", ">=", 1).where("Bags", "<=", 2).orderBy("Bags").get().then((snapshot) => {
                return Promise.all(snapshot.docs.map(grp => {
                    if (grp.data().Adults >= sum) {
                        array2.push(grp.data());
                    }
                }))
            });
            // console.log(array2)
            getinfo1(array2);
            global_counter = 1;
            array2.length = 0

        }


        function range3_4_bags() {
            if (global_counter == 1) {
                del_ele();
                global_counter = 0;
            }
            var db = firebase.firestore();
            db.collection("Car rentals").where("Bags", ">=", 3).where("Bags", "<=", 4).orderBy("Bags").get().then((snapshot) => {
                return Promise.all(snapshot.docs.map(grp => {
                    if (grp.data().Adults >= sum) {
                        array2.push(grp.data());
                    }
                }))
            });
            // console.log(array2)
            getinfo1(array2);
            global_counter = 1;
            array2.length = 0

        }


        function range3_5_seats() {
            if (global_counter == 1) {
                del_ele();
                global_counter = 0;
            }
            var db = firebase.firestore();
            db.collection("Car rentals").where("Adults", ">=", 3).where("Adults", "<=", 5).orderBy("Adults").get().then((snapshot) => {
                return Promise.all(snapshot.docs.map(grp => {
                    if (grp.data().Adults >= sum) {
                        array2.push(grp.data());
                    }
                }))
            });
            // console.log(array2)
            getinfo1(array2);
            global_counter = 1;
            array2.length = 0

        }

        function seats66() {
            if (global_counter == 1) {
                del_ele();
                global_counter = 0;
            }
            var db = firebase.firestore();
            db.collection("Car rentals").where("Adults", ">=", 6).orderBy("Adults").get().then((snapshot) => {
                return Promise.all(snapshot.docs.map(grp => {
                    if (grp.data().Adults >= sum) {
                        array2.push(grp.data());
                    }
                }))
            });
            // console.log(array2)
            getinfo1(array2);
            global_counter = 1;
            array2.length = 0

        }

        function s_l() {
            if (global_counter == 1) {
                del_ele();
                global_counter = 0;
            }
            var db = firebase.firestore();
            db.collection("Car rentals").where("Type", "not-in", ["Premium SUV", "Full-size SUV", "Minivan", "Passenger van"]).get().then((snapshot) => {
                return Promise.all(snapshot.docs.map(grp => {
                    if (grp.data().Adults >= sum) {
                        array2.push(grp.data());
                    }
                }))
            });
            // console.log(array2)
            getinfo1(array2);
            global_counter = 1;
            array2.length = 0

        }

        function suv() {
            if (global_counter == 1) {
                del_ele();
                global_counter = 0;
            }
            var db = firebase.firestore();
            db.collection("Car rentals").where("Type", "in", ["Premium SUV", "Full-size SUV"]).get().then((snapshot) => {
                return Promise.all(snapshot.docs.map(grp => {
                    if (grp.data().Adults >= sum) {
                        array2.push(grp.data());
                    }
                }))
            });
            // console.log(array2)
            getinfo1(array2);
            global_counter = 1;
            array2.length = 0

        }

        function van_type() {

            if (global_counter == 1) {
                del_ele();
                global_counter = 0;
            }

            var db = firebase.firestore();
            db.collection("Car rentals").where("Type", "in", ["Minivan", "Passenger van"]).get().then((snapshot) => {
                return Promise.all(snapshot.docs.map(grp => {
                    if (grp.data().Adults >= sum) {
                        array2.push(grp.data());
                    }

                }))
            });

            getinfo1(array2);
            global_counter = 1;
            array2.length = 0

        }

        function rest() {
            van_type()
            suv()
            s_l()
            seats66()
            range3_5_seats()
            range3_4_bags()
            range1_2_bags()
            range2_4_price()
            price44()
        }

        $("#search_form_1").submit(function (e) {
            e.preventDefault();
            search();
        });
        var cart1 = [];

        function booking(info) {
            var today = new Date();
            var dd = String(today.getDate()).padStart(2, '0');
            var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
            var yyyy = today.getFullYear();

            today = yyyy + '-' + mm + '-' + dd;
            var trip_in = document.getElementById("trip_checkin").value;
            var trip_out = document.getElementById("trip_checkout").value;
            var date_check = Date.parse(trip_in) - Date.parse(today);
            var n_days = (Date.parse(trip_out) - Date.parse(trip_in)) / (60 * 60 * 24 * 1000);
            if (global_counter == 1) {
                del_ele();
                global_counter = 0;
            }
            if (date_check < 0 || n_days < 0) {
                console.log("failed date");
                invisible()
            }
            else {
                console.log("no. of days", n_days)

                var db = firebase.firestore();
                db.collection("Car rentals").where("Order", "==", info).get().then((snapshot) => {

                    getinfo2(snapshot.docs, snapshot.size);
                    aa();
                    return Promise.all(snapshot.docs.map(grp => {
                        cart1.push(grp.data().Order);
                    }))
                });

                global_counter = 1;
            }
        }



        function getinfo1(data) {
            visiblee();
            var car_rentals = "";
            var d = document.createElement("div");
            document.getElementById("results").appendChild(d);
            for (let i = 0; i < data.length; i++) {
                var index = i;
                var info = data[i];
                console.log("bye", info);
                car_rentals += "<div id='offers_grid' class='offers_grid'>";
                car_rentals += "<div style='border:1px solid rgba(158, 158, 158, 0.712); border-radius: 12px; height: 350px;padding: 10px;box-shadow: 5px 10px 18px #888888;'>"; //div2
                car_rentals += "<div class='offers_item rating_4'style='color: black'>";
                car_rentals += "<div class='row'>";
                car_rentals += "<div class='col-lg-1 temp_col'></div> <div class='col-lg-3 col-1680-4'>";
                car_rentals += "<div class='offers_image_container' style='top:4vw; left:2vw; width:60vw'>";
                //modification for image
                car_rentals += " <img id='main_img' style='width:300px;height:200px;' alt='' src=' " + info['Image'] + "' />";
                car_rentals += " </div>";
                car_rentals += "</div";
                car_rentals += "<div class='col-lg-8' style='top:1.5vw;'>";
                car_rentals += "<div class='offers_content' style='top:-33vw;left:25vw;width:40vw;'>";
                car_rentals += "<div id='price' style='color:#fa9e1b' class='offers_price'>";
                car_rentals += "<i class='fa fa-rupee' style='color:#fa9e1b; font-size: smaller'></i>";
                car_rentals += info['Cost'];
                car_rentals += "<span style='color: black'>per day </span>";
                car_rentals += " </div>";
                car_rentals += "<br>";
                car_rentals += "<h2 id='name' style='color:grey'><b>";
                car_rentals += info['Car'];
                car_rentals += "</b></h2>";
                car_rentals += "<h4 id='description'>";
                car_rentals += info['Type'];
                car_rentals += "</h4>";
                car_rentals += "<ul class='offers_icons_list'>";
                car_rentals += " <li class='offers_icons_item'>";
                car_rentals += "<img style='width:20px;height:20px;' src='images/snowflake.png' alt='' />";
                car_rentals += " <p style='display: inline;color:black'> Air Conditioning</p>";
                car_rentals += "</li>";
                car_rentals += "<li class='offers_icons_item'>";
                car_rentals += "<img style='width:20px; height:20px;' src='images/manual-transmission-car.png' alt=''' />";
                car_rentals += "<p style='display: inline;color:black'> Manual gearbox</p>";
                car_rentals += "</li>";
                car_rentals += "<li class='offers_icons_item'>";
                car_rentals += "<img style='width:20px; height:20px;' src='images/default-avatar.png' alt=''' />";
                car_rentals += "<p style='display: inline;color:black'>";
                car_rentals += info['Adults'] + " Adults </p>";
                car_rentals += "</li>";
                car_rentals += "<li class='offers_icons_item'>";
                car_rentals += "<img style='width:20px; height:20px;' src='images/2430422.png' alt=''' />";
                car_rentals += "<p style='display: inline;color:black'>";
                car_rentals += info['Bags'] + " Bags </p>";
                car_rentals += "</li>";
                car_rentals += "</ul>" + "<hr>";
                car_rentals += "<h5 style='color: #fa9e1b'><span>&#10003; </span>Free cancellation</h5>";
                car_rentals += "<h6 style='color:#fa9e1b'>You'll only pay if you arrive for your reservation</h6>";
                car_rentals += "<div class='button book_button'  style='top:-1.5vw'>";
                car_rentals += " <a href='#' onclick='booking(" + info['Order'] + ")'>book<span></span><span></span><span></span></a > ";
                car_rentals += " </div></div></div></div></div></div>";

            }
            if (car_rentals == "") {
                invisible()
            }
            else { d.innerHTML = car_rentals; }

        }

        function getinfo(data, snaps) {
            visiblee();
            var car_rentals = "";
            var d = document.createElement("div");
            document.getElementById("results").appendChild(d);
            console.log(snaps);

            for (let i = 0; i < snaps; i++) {
                var info = data[i].data();
                console.log("hi", info);
                car_rentals += "<div id='offers_grid' class='offers_grid'>";
                car_rentals += "<div style='border:1px solid rgba(158, 158, 158, 0.712); border-radius: 12px; height: 350px;padding: 10px;box-shadow: 5px 10px 18px #888888;'>"; //div2
                car_rentals += "<div class='offers_item rating_4'style='color: black'>";
                car_rentals += "<div class='row'>";
                car_rentals += "<div class='col-lg-1 temp_col'></div> <div class='col-lg-3 col-1680-4'>";
                car_rentals += "<div class='offers_image_container' style='top:4vw; left:2vw; width:60vw'>";
                //modification for image
                car_rentals += " <img id='main_img' style='width:300px;height:200px;' alt='' src=' " + info.Image + "' />";
                car_rentals += " </div>";
                car_rentals += "</div";
                car_rentals += "<div class='col-lg-8' style='top:1.5vw;'>";
                car_rentals += "<div class='offers_content' style='top:-33vw;left:25vw;width:40vw;'>";
                car_rentals += "<div id='price' style='color:#fa9e1b' class='offers_price'>";
                car_rentals += "<i class='fa fa-rupee' style='color:#fa9e1b; font-size: smaller'></i>";
                car_rentals += info.Cost;
                car_rentals += "<span style='color: black'>per day </span>";
                car_rentals += " </div>";
                car_rentals += "<br>";
                car_rentals += "<h2 id='name' style='color:grey'><b>";
                car_rentals += info.Car;
                car_rentals += "</b></h2>";
                car_rentals += "<h4 id='description'>";
                car_rentals += info.Type;
                car_rentals += "</h4>";

                car_rentals += "<ul class='offers_icons_list' style='display:inline'>";

                car_rentals += " <li class='offers_icons_item' style='display:inline'>";
                car_rentals += "<img style='width:20px;height:20px;' src='images/snowflake.png' alt='' />";
                car_rentals += " <p style='display: inline;color:black'> Air Conditioning</p>";
                car_rentals += "</li>";

                car_rentals += "<li class='offers_icons_item' style='display:inline'>";
                car_rentals += "<img style='width:20px; height:20px;' src='images/manual-transmission-car.png' alt=''' />";
                car_rentals += "<p style='display: inline;color:black'> Manual gearbox</p>";
                car_rentals += "</li>";

                car_rentals += "<li class='offers_icons_item' style='display:inline'>";
                car_rentals += "<img style='width:20px; height:20px;' src='images/default-avatar.png' alt=''' />";
                car_rentals += "<p style='display: inline;color:black'>";
                car_rentals += info.Adults + " Adults </p>";
                car_rentals += "</li>";

                car_rentals += "<li class='offers_icons_item' style='display:inline'>";
                car_rentals += "<img style='width:20px; height:20px;' src='images/2430422.png' alt=''' />";
                car_rentals += "<p style='display: inline;color:black'>";
                car_rentals += info.Bags + " Bags </p>";
                car_rentals += "</li>";

                car_rentals += "</ul>" + "<hr>";

                car_rentals += "<h5 style='color: #fa9e1b'><span>&#10003; </span>Free cancellation</h5>";
                car_rentals += "<h6 style='color:#fa9e1b' style='display:inline'>You'll only pay if you arrive for your reservation</h6>";
                car_rentals += "<div class='button book_button' style='top:-1.5vw'>";
                car_rentals += " <a href='#' onclick='booking(" + info.Order + ");'>book<span></span><span></span><span></span></a > ";
                car_rentals += " </div></div></div></div></div></div>";

            }

            if (car_rentals == "") {
                invisible()
            }
            else { d.innerHTML = car_rentals; }
        }

        function invisible() {

            var gg = document.getElementById("not_found");

            gg.style.display = "inline";

        }

        function visiblee() {

            var gg = document.getElementById("not_found");

            gg.style.display = "none";

        }

        function getinfo2(data, snaps) {

            visiblee();
            var car_rentals = "";
            var d = document.createElement("div");
            document.getElementById("results").appendChild(d);
            console.log(snaps);

            for (let i = 0; i < snaps; i++) {
                var info = data[i].data();
                console.log("hi", info);
                car_rentals += "<div style='display: inline'>";
                car_rentals += "<div id='offers_grid' class='offers_grid'>";
                car_rentals += "<div style='border:1px solid rgba(158, 158, 158, 0.712); border-radius: 12px;  width:780px;height: 300px;padding: 10px;box-shadow: 5px 10px 18px #888888;display: inline-block; float:left; margin-right: 10px;'>"; //div2
                car_rentals += "<div class='offers_item rating_4'style='color: black'>";
                car_rentals += "<div class='row'>";
                car_rentals += "<div class='col-lg-1 temp_col'></div> <div class='col-lg-3 col-1680-4'>";
                car_rentals += "<div class='offers_image_container' style='top:4vw; left:2vw; width:20vw'>";
                //modification for image
                car_rentals += " <img id='main_img' style='width:250px;height:200px;' alt='' src=' " + info.Image + "' />";
                car_rentals += " </div>";
                car_rentals += "</div";
                car_rentals += "<div class='col-lg-8' style='top:1.5vw;'>";
                car_rentals += "<div class='offers_content' style='top:-33vw;left:20vw;width:40vw;'>";
                car_rentals += "<div id='price' style='color:#fa9e1b' class='offers_price'>";
                car_rentals += "<i class='fa fa-rupee' style='color:#fa9e1b; font-size: smaller'></i>";
                car_rentals += info.Cost;
                car_rentals += "<span style='color: black'>per day </span>";
                car_rentals += " </div>";
                car_rentals += "<br>";
                car_rentals += "<h2 id='name' style='color:grey'><b>";
                car_rentals += info.Car;
                car_rentals += "</b></h2>";
                car_rentals += "<h4 id='description'>";
                car_rentals += info.Type;
                car_rentals += "</h4>";

                car_rentals += "<ul class='offers_icons_list' style='display:inline'>";

                car_rentals += " <li class='offers_icons_item' style='display:inline'>";
                car_rentals += "<img style='width:20px;height:20px;' src='images/snowflake.png' alt='' />";
                car_rentals += " <p style='display: inline;color:black'> Air Conditioning</p>";
                car_rentals += "</li>";

                car_rentals += "<li class='offers_icons_item' style='display:inline'>";
                car_rentals += "<img style='width:20px; height:20px;' src='images/manual-transmission-car.png' alt=''' />";
                car_rentals += "<p style='display: inline;color:black'> Manual gearbox</p>";
                car_rentals += "</li>";

                car_rentals += "<li class='offers_icons_item' style='display:inline'>";
                car_rentals += "<img style='width:20px; height:20px;' src='images/default-avatar.png' alt=''' />";
                car_rentals += "<p style='display: inline;color:black'>";
                car_rentals += info.Adults + " Adults </p>";
                car_rentals += "</li>";

                car_rentals += "<li class='offers_icons_item' style='display:inline'>";
                car_rentals += "<img style='width:20px; height:20px;' src='images/2430422.png' alt=''' />";
                car_rentals += "<p style='display: inline;color:black'>";
                car_rentals += info.Bags + " Bags </p>";
                car_rentals += "</li>";

                car_rentals += "</ul>" + "<hr style='width: 27vw;'>";

                car_rentals += "<h5 style='color: #fa9e1b'><span>&#10003; </span>Free cancellation</h5>";
                car_rentals += "<h6 style='color:#fa9e1b' style='display:inline'>You'll only pay if you arrive for your reservation</h6>";
                car_rentals += "<div class='button book_button' style='top:-1.5vw'>";

                console.log(info);
                //hotels += " <a href='#'>Pay Now<span></span><span></span><span></span></a > ";
                car_rentals += " </div></div></div></div></div></div></div>";

                var pay = "";
                var d2 = document.createElement("div");

                var tax = Math.round((info.Cost * 0.05))



                var today = new Date();
                var dd = String(today.getDate()).padStart(2, '0');
                var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
                var yyyy = today.getFullYear();

                today = yyyy + '-' + mm + '-' + dd;

                var trip_in = document.getElementById("trip_checkin").value;
                var trip_out = document.getElementById("trip_checkout").value;
                var date_check = Date.parse(trip_in) - Date.parse(today);
                var n_days = (Date.parse(trip_out) - Date.parse(trip_in)) / (60 * 60 * 24 * 1000);
                document.getElementById("results").appendChild(d2);
                if (!n_days) {
                    n_days = 1
                }

                pay += "<div id='offers_grid' class='offers_grid' style='border:1px solid rgba(158, 158, 158, 0.712);  border-radius: 12px; height: 480px; width: 300px; display: inline-block;top:-4.7vw; float:right; padding: 1.5vw;box-shadow: 5px 10px 18px #888888;'> ";

                pay += "<ul style='margin-left:10px solid black;'>";
                pay += "<h3 id='name' style='color:grey'>";



                pay += "<br><br></h3>";
                pay += "<input type='radio' onclick='radiob(" + info.Cost + ',' + n_days + ")' id='part' name='pay'value='part'><h5 style='color:black;display:inline;font-size:18px;font-weight:bold'> Make part payment now:</h5>";

                pay += "<p style='margin-bottom: -0.5px;color:black;left:-0.5vw;'>Pay the rest to the driver <i class='fa fa-rupee' style='color:#fa9e1b; font-size: 20px;padding-left: 0.7vw;font-size: 18px;'></i></p><p id='othird'style='font-size:18px;color:#fa9e1b;display:inline;font-weight:bold;position: relative;top: -2.2vw;left: 11.4vw;'>"
                if (!trip_in || !trip_out) {
                    pay += Math.round(info.Cost / 3) + "</p>"
                }
                else {
                    pay += Math.round((info.Cost * n_days) / 3) + "</p>"
                }
                pay += "<br style='display: block;margin-bottom: -0.2em;line-height:20px'>";
                pay += "<div style='top:-1vw'>"
                pay += "<input type='radio' id='full' onclick='radiob(" + info.Cost + ',' + n_days + ")' name='pay'value='full'><h5 style='color:black;display:inline;font-size:18px;font-weight:bold'> Make full payment now:</h5>";
                pay += "<p style='margin-bottom: -0.5px;color:black;left:-0.5vw;'>Pay in advance to driver <i class='fa fa-rupee' style='color:#fa9e1b; font-size: 20px;padding-left: 0.7vw;font-size: 18px;'></i></p><p id ='adv' style='font-size:18px;color:#fa9e1b;display:inline;font-weight:bold;position: relative;top: -2.2vw;left: 11.4vw;'>" + Math.round((info.Cost * n_days * 0.96) + tax) + "</p>";



                pay += "</div>"
                pay += "<hr style='margin-top:-2vw;'>"
                pay += "<p id='discount' style='margin-left: 13vw;color: red;font-size: 12px;'>4% off</p>"
                pay += "<h3 id='name' style='color:black;margin-top: -2vw;font-size: 18px;font-weight: 600;'>Total Amount</h3><p style='margin-top: -1vw;color:black;left:-0.5vw;font-size:12px'>inc. of tolls and taxes</p>";
                pay += "<img style='width: 45px;height: 13px;z-index: 2; margin-left: 8vw; margin-top: -4vw;' src='images/slanting.png ' alt='' />";
                pay += "<h3 id='after_cost' style='color:black;margin-top: -4.2vw;margin-left:11vw;font-size: 25px;font-weight: 600;'>â‚¹" + (Math.round((info.Cost * n_days * 0.96) + tax)) + "</h3><p style='margin-top: -1.7vw;margin-left:7.9vw;color:black;left:-0.5vw;font-size:14px' id='before_cost'>â‚¹" + (Math.round((info.Cost * n_days) + tax)) + "</p>";
                pay += "<br></h3></h3>";
                pay += "<label style='color:grey'><b>Enter Coupon code</b> </label>";
                pay += "<br>";
                pay += "<input type='text' id='coupon' name='coupon' size='80' placeholder='eg. CAB100' style='padding:0.5vw;width: 250px; height: 30px'>"

                pay += "<p id='apply' style='color:#fa9e1b;margin-top: -1.9vw;margin-left: 13.5vw;'onclick='coupon(" + info.Cost + "," + n_days + ");'>Apply</p>"

                pay += "</div></div>";
                var details = "";
                console.log("Im in form");
                var d1 = document.createElement("div");
                document.getElementById("results").appendChild(d1);

                details += "<form id='PPAY'><div id='offers_grid' class='offers_grid' style='border:1px solid rgba(158, 158, 158, 0.712); border-radius: 12px; height: 35vw; width:780px; padding: 1.5vw; top:-3vw; box-shadow: 5px 10px 18px #888888;display: inline-block; float:left; margin-right: 10px;' >";
                details += " <ul style='margin-left:10px solid black;'>";
                details += "<h3 style='font-size:25px;color:grey;font-weight:bolder' id='name' style='color:grey' >";
                details += "Trip details"
                details += "</h3>";

                details += "<h4 style='margin-bottom: -0.5px;padding: 1.2vw 0.5vw 0.5vw 0vw;color:black'>Pick-up Address</h4>"
                details += "<input type='text' id='P_address' name='P_address' size='80' placeholder='Enter Pick-up Address'; required style='width: 700px; height: 35px; font-size:15px;padding:0.5vw;'>"
                details += "<br style='margin: 2em;display: block;font-size: 24 %;'>"
                details += "<h4 style='margin-bottom: -0.5px;padding: 1.2vw 0.5vw 0.5vw 0vw;color:black'>Drop-off Address</h4>"

                details += "<input type='text' id='D_address' name='D_address' size='80' required placeholder='Enter Drop-off Address'; style='width: 700px; height: 35px;  font-size:15px;padding:0.5vw;'>"
                details += "<hr style='width: 730px;'>";

                details += "<h3 style='font-size:25px;color:grey;font-weight:bolder' id='name' style='color:grey' >";
                details += "Confirm Traveller information"
                details += "</h3>";

                details += "<div id='sideby' style='top:1vw;'>";
                details += "<h4 style='margin-bottom: -0.5px;padding:0.5vw 0.5vw 0.5vw 0vw;color:black'>Name</h4>"
                details += "<input type='text' id='name1' name='name1' size='80' placeholder='Enter your full name' required style='width: 330px; height: 35px; font-size:15px;padding:0.5vw;'>"

                details += "<h4 style='margin-bottom: -0.5px;padding: 1.2vw 0.5vw 0.5vw 0vw;color:black'>Email</h4>";

                details += "<input type='text' id='email1' name='email1' size='80' placeholder='Enter your email address' required style='width: 330px; height: 35px; font-size:15px;padding:0.5vw;'>"
                details += "<br><br>"
                details += "<h5 style='color:black;'>By proceeding to book, I agree to MiniTravels's <a href='#'>Privacy Policy</a>, <a href='#'>User Agreement</a>, and <a href='#'>Terms of Service</a>.<h5><br>";
                details += "</div>";

                details += "<div id='sideby' style='left:370px;top:-15.3vw;padding:1.5vw;'>";
                details += "<h4 style='margin-bottom: -0.5px;padding: 1.2vw 0.5vw 0.5vw 0vw;color:black'>Gender</h4>"
                details += "<input type='radio' id='female' name='gender'value='female'><p style='color:black;display:inline;padding:0.8vw 0.8vw 0.8vw 0vw;'> Female </p>";
                details += "<input type='radio' id='male' name='gender'value='male'><p style='color:black;display:inline;padding:0.8vw 0.8vw 0.8vw 0vw;'> Male</p>";

                details += "<h4 style='margin-bottom: -0.5px;padding: 1.2vw 0.5vw 0.5vw 0vw;color:black'>Contact number</h4>";
                details += "<div style='top:0vw'><input type='tel' id='tel' name='tel' size='80' placeholder='Enter your 10 digit mobile number' required style='width: 300px; height: 35px; font-size:15px;padding:0.5vw;'></div>"

                details += "<div class='button book_button'  style='top:-52.5vw;left:27vw;width:16.5vw;'>";
                details += "<input style='font-size:22px;font-weight:bold;background-color: #31124b;width: 17vw;height: 5.5vw;color: white;margin-top: -1vw;margin-left:-1vw;' id='Payresult' name='Payresult' type='submit' onclick='bb()' value = 'Pay' >"
                details += "</div></form>";
                details += " </div>";
                details += "</ul>";
                details += "</div></div>";

                var extras = "";
                var e1 = document.createElement("div");
                document.getElementById("results").appendChild(e1);

                extras += "<div style='display: inline'>";
                extras += "<div id='offers_grid' class='offers_grid'>";
                extras += "<div style='border:1px solid rgba(158, 158, 158, 0.712); border-radius: 12px;  width:300px;height: 360px;padding: 1.5vw;box-shadow: 5px 10px 18px #888888;display: inline-block;top:-3vw; float:right; padding: 1.5vw;'>"; //div2
                extras += "<h2 style='font-size:36px;color:grey;font-weight:bold'>Driver & Cab details</h2><br><h4 style='top:-40px;color:black'>Cab and driver details will be shared up to 15 mins prior to departure.</h4><h4 style='padding-top: 0.7vw; top:50px;color:#fa9e1b'>Free cancellation, till 1 hour of departure</h4></div>"

            }
            if (car_rentals == "" || pay == "" || details == "") {
                invisible()
            }
            else {
                d.innerHTML = car_rentals;
                d1.innerHTML = details;
                e1.innerHTML = extras;
                d2.innerHTML = pay;
            }
            fillup();
        }
        var gc = 0
        function radiob(cost, days) {

            var checkRadio = document.querySelector('input[name="pay"]:checked');
            var tax = Math.round((cost * 0.05))
            if (checkRadio != null) {
                if (checkRadio.value == 'part') {
                    console.log("partttttt")
                    var score = document.getElementById('othird').textContent
                    document.getElementById('Payresult').value = "Pay â‚¹" + score;
                }
                if (checkRadio.value == 'full') {
                    console.log("fullll")
                    var score = document.getElementById('adv').textContent
                    document.getElementById('Payresult').value = "Pay â‚¹" + score;
                }

            }

        }


        function coupon(cost, days) {
            var cc = document.getElementById("coupon").value;
            console.log(cc)
            console.log(cost, "  ", days, "   ", tax)
            var trip_in = document.getElementById("trip_checkin").value;
            var trip_out = document.getElementById("trip_checkout").value;

            var tax = Math.round((cost * 0.05))

            var db = firebase.firestore();
            db.collection("Coupon").where("name", "==", cc.toLowerCase()).get().then((snapshot) => {
                var discount = (snapshot.docs)[0].data().discount
                if (!trip_in || !trip_out) {
                    var total = Math.round((cost * (100 - (discount + 4)) / 100) + tax)
                    radiob(cost, days)
                }
                else {

                    var total = Math.round((cost * days * (100 - (discount + 4)) / 100) + tax)
                    radiob(cost, days)
                }

                console.log(total)
                var disc = document.getElementById('discount');
                disc.textContent = (4 + discount) + "% off";
                var after_cost = document.getElementById('after_cost');
                document.getElementById('adv').textContent = total;
                after_cost.textContent = "â‚¹" + total;
                var before_cost = document.getElementById('before_cost');
                before_cost.textContent = "â‚¹" + Math.round(cost * days + tax);
                document.getElementById('othird').textContent = Math.round(total / 3)
                radiob(cost, days)
            });
            if (!trip_in || !trip_out || !cc) {
                var disc = document.getElementById('discount');
                disc.textContent = 4 + "% off";
                var total = Math.round((cost * days * 0.96) + tax)
                document.getElementById('adv').textContent = total;
                var after_cost = document.getElementById('after_cost');
                after_cost.textContent = "â‚¹" + total;
                var before_cost = document.getElementById('before_cost');
                before_cost.textContent = "â‚¹" + Math.round(cost * days + tax);
                document.getElementById('othird').textContent = Math.round(total / 3)
                radiob(cost, days)
            }
            else if (!cc) {
                var disc = document.getElementById('discount');
                disc.textContent = 4 + "% off";
                var total = Math.round((cost * days * 0.96) + tax)
                document.getElementById('adv').textContent = total;
                var after_cost = document.getElementById('after_cost');
                after_cost.textContent = "â‚¹" + total;
                var before_cost = document.getElementById('before_cost');
                before_cost.textContent = "â‚¹" + Math.round(cost * days + tax);
                document.getElementById('othird').textContent = Math.round(total / 3)
                radiob(cost, days)
            }

            console.log(cost, "  ", days, "   ", tax)


        }
        function fillup() {
            console.log("going to fill up");
            var res = localStorage.getItem("email")
            console.log(res)
            document.getElementById('email1').value = res;
        }


        const pd = [];
        var adder = 0;
        var key1 = 0;


        function bb() {
            $("#PPAY").submit(function (e) {
                e.preventDefault();
                var c_cart = cart();
                for (let i = 0; i < c_cart.length - 1; i++) {
                    var db = firebase.firestore();
                    db.collection("Car rentals").where("Order", "==", c_cart[i]).get().then((snapshot) => {
                        console.log(snapshot.docs)
                        c_getinfo1(snapshot.docs, snapshot.size);

                    });
                }
            });
        }
        function cart() {

            console.log("added to cart")
            localStorage.setItem("cart", JSON.stringify(cart1))
            var c_cart = localStorage.getItem("cart")
            console.log('retrievedObject: ', JSON.parse(c_cart));
            JSON.parse(c_cart, (key, value) => {
                pd.push(value)
            })
            return pd
        }
        function aa() {
            var email = document.getElementById('email1').value
            var db = firebase.firestore();
            var docRef = db.collection("Users").doc(email);
            docRef.get().then((doc) => {
                console.log(doc.data().last_key_car)
                if (doc.data().last_key_car != 0) {
                    console.log("setting a with last_key_car")
                    localStorage.setItem("a", doc.data().last_key_car)
                } else {
                    console.log("a=0")
                    localStorage.setItem("a", 0)
                }
            });
        }
        var a = 0
        function c_getinfo1(l2, snaps) {
            console.log(snaps)
            for (let i = 0; i < snaps; i++) {
                var info = l2[i].data();
                console.log(info.Car)
                var trip_in = document.getElementById("trip_checkin").value;
                var trip_out = document.getElementById("trip_checkout").value;
                var n_days = (Date.parse(trip_out) - Date.parse(trip_in)) / (60 * 60 * 24 * 1000);

                if (!n_days) {
                    n_days = 1
                }
                var email = document.getElementById('email1').value
                var P_address = document.getElementById("P_address").value
                var D_address = document.getElementById('D_address').value
                var tel = document.getElementById('tel').value
                var name = document.getElementById('name1').value
                var pay = document.getElementById('Payresult').value
                var pay = pay.slice(5)
                aa();

                var a = parseInt(localStorage.getItem("a"))
                console.log(P_address, D_address, email, tel, name, pay);
                var db = firebase.firestore();
                db.collection('Users').doc(email).set({
                    ['Cart.' + (a + 1) + '.item']: {

                        "Car": info.Car,
                        "Type": info.Type,
                        "Adults": info.Adults,
                        "Bags": info.Bags,
                        "Image": info.Image,
                        "Cost": info.Cost,
                        "Order": info.Order,
                        "email": email,
                        "name": name,
                        "contact": tel,
                        "pickup": P_address,
                        "dropoff": D_address,
                        "price": pay,
                        "days": n_days,

                    },
                    "last_key_car": (a + 1),
                }, {
                    merge: true
                }).then(() => {
                    console.log(a + 1)
                    console.log("YAYYY Document successfully written!");
                    a += 1
                    localStorage.setItem("a", a)

                })
            }
        }



    </script>
    <script src="js/auth.js"></script>

</body>

</html>